(function(){"use strict";const u="2.6.0",E="07a8241b182f8a246a7cd39894799a9e",l=Symbol("isMockedResponse"),a=new Set;self.addEventListener("install",function(){self.skipWaiting()}),self.addEventListener("activate",function(n){n.waitUntil(self.clients.claim())}),self.addEventListener("message",async function(n){const e=n.source.id;if(!e||!self.clients)return;const s=await self.clients.get(e);if(!s)return;const t=await self.clients.matchAll({type:"window"});switch(n.data){case"KEEPALIVE_REQUEST":{o(s,{type:"KEEPALIVE_RESPONSE"});break}case"INTEGRITY_CHECK_REQUEST":{o(s,{type:"INTEGRITY_CHECK_RESPONSE",payload:{packageVersion:u,checksum:E}});break}case"MOCK_ACTIVATE":{a.add(e),o(s,{type:"MOCKING_ENABLED",payload:{client:{id:s.id,frameType:s.frameType}}});break}case"MOCK_DEACTIVATE":{a.delete(e);break}case"CLIENT_CLOSED":{a.delete(e),t.filter(i=>i.id!==e).length===0&&self.registration.unregister();break}}}),self.addEventListener("fetch",function(n){const{request:e}=n;if(e.mode==="navigate"||e.cache==="only-if-cached"&&e.mode!=="same-origin"||a.size===0)return;const s=crypto.randomUUID();n.respondWith(y(n,s))});async function y(n,e){const s=await p(n),t=await h(n,s,e);return s&&a.has(s.id)&&async function(){const r=t.clone();o(s,{type:"RESPONSE",payload:{requestId:e,isMockedResponse:l in t,type:r.type,status:r.status,statusText:r.statusText,body:r.body,headers:Object.fromEntries(r.headers.entries())}},[r.body])}(),t}async function p(n){const e=await self.clients.get(n.clientId);return a.has(n.clientId)||(e==null?void 0:e.frameType)==="top-level"?e:(await self.clients.matchAll({type:"window"})).filter(t=>t.visibilityState==="visible").find(t=>a.has(t.id))}async function h(n,e,s){const{request:t}=n,r=t.clone();function i(){const f=Object.fromEntries(r.headers.entries());return delete f["x-msw-intention"],fetch(r,{headers:f})}if(!e||!a.has(e.id))return i();const c=await t.arrayBuffer(),d=await o(e,{type:"REQUEST",payload:{id:s,url:t.url,mode:t.mode,method:t.method,headers:Object.fromEntries(t.headers.entries()),cache:t.cache,credentials:t.credentials,destination:t.destination,integrity:t.integrity,redirect:t.redirect,referrer:t.referrer,referrerPolicy:t.referrerPolicy,body:c,keepalive:t.keepalive}},[c]);switch(d.type){case"MOCK_RESPONSE":return m(d.data);case"PASSTHROUGH":return i()}return i()}function o(n,e,s=[]){return new Promise((t,r)=>{const i=new MessageChannel;i.port1.onmessage=c=>{if(c.data&&c.data.error)return r(c.data.error);t(c.data)},n.postMessage(e,[i.port2].concat(s.filter(Boolean)))})}async function m(n){if(n.status===0)return Response.error();const e=new Response(n.body,n);return Reflect.defineProperty(e,l,{value:!0,enumerable:!0}),e}})();
